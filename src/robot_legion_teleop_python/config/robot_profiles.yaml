# SPDX-License-Identifier: LicenseRef-Proprietary

defaults:
  drive_profile: drive_diff
  hardware_profile: hbridge_2ch

robots:
  # Differential-drive robots
  robot1:
    drive_profile: drive_diff
    hardware_profile: tb6612_diff_dual

  robot2:
    drive_profile: drive_omni
    hardware_profile: tb6612_dual

  robot3:
    drive_profile: drive_diff
    hardware_profile: hbridge_2ch

  # Omni robot (TB6612 x2)
  robot_omni:
    drive_profile: drive_omni
    hardware_profile: tb6612_dual

drive_profiles:
  drive_diff:
    type: diff_drive
    params:
      # These are available for future tuning, even if not used in the simple mixer yet.
      wheel_base_m: 0.22
      max_linear_mps: 0.5
      max_angular_rps: 1.0

  drive_omni:
    type: omni
    params:
      # These are placeholders for future "proper kinematics" if you want it.
      wheel_base_m: 0.22
      track_width_m: 0.18
      max_linear_mps: 0.5
      max_angular_rps: 1.0

hardware_profiles:
  # --------------------------------------------------------------------------
  # Differential drive: 2-channel H-bridge style wiring
  #
  # Your provided mapping:
  #   ENA to GPIO 12 (PWM0)
  #   IN1 to GPIO 23
  #   IN2 to GPIO 22
  #   IN3 to GPIO 27
  #   IN4 to GPIO 17
  #   ENB to GPIO 13 (PWM1)
  #
  # We interpret that as:
  #   left motor  -> ENA + IN1/IN2
  #   right motor -> ENB + IN3/IN4
  # --------------------------------------------------------------------------
  hbridge_2ch:
    gpio:
      en_left: 12
      in1_left: 17
      in2_left: 27

      en_right: 13
      in1_right: 22
      in2_right: 23

  # --------------------------------------------------------------------------
  # Omni: two TB6612 boards (4 motor channels)
  #
  # Your provided mapping:
  #
  # TB6612 #1 (Front motors)
  #   Front-Left (Motor A)
  #     PWMA → GPIO 12 (PWM)
  #     AIN1 → GPIO 5
  #     AIN2 → GPIO 6
  #   Front-Right (Motor B)
  #     PWMB → GPIO 13 (PWM)
  #     BIN1 → GPIO 16
  #     BIN2 → GPIO 19
  #
  # TB6612 #2 (Rear motors)
  #   Rear-Left (Motor A)
  #     PWMA → GPIO 18 (PWM)
  #     AIN1 → GPIO 20
  #     AIN2 → GPIO 21
  #   Rear-Right (Motor B)
  #     PWMB → GPIO 26 (PWM)
  #     BIN1 → GPIO 23
  #     BIN2 → GPIO 24
  # --------------------------------------------------------------------------
  tb6612_dual:
    gpio:
      fl_pwm: 12
      fl_in1: 5
      fl_in2: 6

      fr_pwm: 13
      fr_in1: 16
      fr_in2: 19

  # Differential-drive wiring using TWO TB6612 boards (left and right pairs)
  # Matches wiring in GPIO_for_differential_Tb6612_DUAL.md
  tb6612_diff_dual:
    gpio:
      # LEFT side (TB6612 #1)
      fl_pwm: 12
      fl_in1: 5
      fl_in2: 6

      rl_pwm: 13
      rl_in1: 16
      rl_in2: 20

      # RIGHT side (TB6612 #2)
      fr_pwm: 18
      fr_in1: 23
      fr_in2: 24

      rr_pwm: 19
      rr_in1: 25
      rr_in2: 8

    # If physical wiring yields reversed polarity, set these flags per-robot
    # invert_left: false
    # invert_right: false

      rl_pwm: 18
      rl_in1: 20
      rl_in2: 21

      rr_pwm: 26
      rr_in1: 23
      rr_in2: 24
